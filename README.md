# akshon

the intent of this project is to have an experience similar to 
the AWSCDK or CDK8S for writing any ci/cd pipeline. 

## Example

this example builds the respective supported language libs and 
uploads them as an artifact

``` ts
import { Workflow, Job, Step, Action, synth } from './src/index';
import * as fs from 'fs';

const workflowProps = {
  name: 'build akshon artifact',
  on: {
    push: {
      branches: ['master'],
    },
  },
};

const workflow = new Workflow(workflowProps);

const buildJob = new Job(workflow, 'build', {
  runsOn: 'ubuntu-latest',
  name: 'Build',
});

Step.fromAction(buildJob, 'checkout', new Action('actions', 'checkout', 'v5'));

Step.fromAction(buildJob, 'setup-node', new Action('actions', 'setup-node', 'v5'), {
  with: {
    'node-version': '24.11.1',
  },
});

new Step(buildJob, 'install-deps', {
  name: 'Install dependencies',
  run: 'npm install',
});

new Step(buildJob, 'build', {
  name: 'Build',
  run: 'npm run build',
});

Step.fromAction(buildJob, 'upload-artifact', new Action('actions', 'upload-artifact', 'v5'), {
  with: {
    name: 'build-artifact',
    path: 'dist',
    overwrite: true
  },
});

workflow.addJob('build', buildJob);

const yaml = synth(workflow);

fs.writeFileSync('.github/workflows/build.yml', yaml);
```

## Output

``` yaml
# this file was generated by a tool. DO NOT EDIT

name: build akshon artifact
on:
  push:
    branches:
      - master
jobs:
  build:
    runs-on: ubuntu-latest
    name: Build
    steps:
      - uses: actions/checkout@v5
      - uses: actions/setup-node@v5
        with:
          node-version: 24.11.1
      - name: Install dependencies
        run: npm install
      - name: Build
        run: npm run build
      - uses: actions/upload-artifact@v5
        with:
          name: build-artifact
          path: dist
          overwrite: true

```

## TODO

cli:
- create/init new project: creates a config for the project 
- synth: gen the output. 